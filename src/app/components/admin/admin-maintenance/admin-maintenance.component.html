<div class="admin-container">
    <div class="header-container">
        <h1>System Maintenance</h1>
        <p class="premium-subtitle">Manage application availability across environments</p>
    </div>

    <div class="maintenance-grid">
        <!-- Production Maintenance -->
        <mat-expansion-panel class="maintenance-panel glass-card" [expanded]="true">
            <mat-expansion-panel-header
                [style.border-left]="prodMaintenance.enabled ? '4px solid #f44336' : '4px solid #4caf50'">
                <mat-panel-title class="maintenance-header-title">
                    <mat-icon [style.color]="prodMaintenance.enabled ? '#f44336' : '#4caf50'">
                        {{ prodMaintenance.enabled ? 'engineering' : 'check_circle' }}
                    </mat-icon>
                    <span>Production</span>
                </mat-panel-title>
                <mat-panel-description class="maintenance-header-description">
                    <span *ngIf="!prodMaintenance.enabled" class="status-text online">Online</span>
                    <span *ngIf="prodMaintenance.enabled" class="status-text offline">Offline</span>

                    <mat-slide-toggle [checked]="prodMaintenance.enabled" (change)="onMaintenanceToggle($event, 'prod')"
                        (click)="$event.stopPropagation()" [disabled]="isUpdatingMaintenance" color="warn">
                    </mat-slide-toggle>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <div class="maintenance-content">
                <p class="maintenance-description">
                    Non-admin users on Production will be redirected.
                </p>

                <div class="maintenance-form-container">
                    <mat-form-field appearance="outline" class="maintenance-message-field">
                        <mat-label>Message (Prod)</mat-label>
                        <textarea matInput [(ngModel)]="prodMaintenance.message" rows="2"
                            placeholder="Message shown to users" [disabled]="isUpdatingMaintenance"></textarea>
                    </mat-form-field>

                    <div class="maintenance-actions">
                        <button mat-raised-button color="primary" (click)="saveMaintenanceMessage('prod')"
                            [disabled]="isUpdatingMaintenance || !hasMessageChanged('prod')" class="save-btn">
                            <mat-icon>save</mat-icon>
                            Save
                        </button>
                        <mat-spinner *ngIf="isUpdatingMaintenance" diameter="24"
                            style="align-self: center;"></mat-spinner>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>

        <!-- Beta Maintenance -->
        <mat-expansion-panel class="maintenance-panel glass-card" [expanded]="true">
            <mat-expansion-panel-header
                [style.border-left]="betaMaintenance.enabled ? '4px solid #f44336' : '4px solid #4caf50'">
                <mat-panel-title class="maintenance-header-title">
                    <mat-icon [style.color]="betaMaintenance.enabled ? '#f44336' : '#4caf50'">
                        {{ betaMaintenance.enabled ? 'engineering' : 'check_circle' }}
                    </mat-icon>
                    <span>Beta</span>
                </mat-panel-title>
                <mat-panel-description class="maintenance-header-description">
                    <span *ngIf="!betaMaintenance.enabled" class="status-text online">Online</span>
                    <span *ngIf="betaMaintenance.enabled" class="status-text offline">Offline</span>

                    <mat-slide-toggle [checked]="betaMaintenance.enabled" (change)="onMaintenanceToggle($event, 'beta')"
                        (click)="$event.stopPropagation()" [disabled]="isUpdatingMaintenance" color="warn">
                    </mat-slide-toggle>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <div class="maintenance-content">
                <p class="maintenance-description">
                    Non-admin users on Beta will be redirected.
                </p>

                <div class="maintenance-form-container">
                    <mat-form-field appearance="outline" class="maintenance-message-field">
                        <mat-label>Message (Beta)</mat-label>
                        <textarea matInput [(ngModel)]="betaMaintenance.message" rows="2"
                            placeholder="Message shown to users" [disabled]="isUpdatingMaintenance"></textarea>
                    </mat-form-field>

                    <div class="maintenance-actions">
                        <button mat-raised-button color="primary" (click)="saveMaintenanceMessage('beta')"
                            [disabled]="isUpdatingMaintenance || !hasMessageChanged('beta')" class="save-btn">
                            <mat-icon>save</mat-icon>
                            Save
                        </button>
                        <mat-spinner *ngIf="isUpdatingMaintenance" diameter="24"
                            style="align-self: center;"></mat-spinner>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>

        <!-- Dev Maintenance -->
        <mat-expansion-panel class="maintenance-panel glass-card" [expanded]="true">
            <mat-expansion-panel-header
                [style.border-left]="devMaintenance.enabled ? '4px solid #f44336' : '4px solid #4caf50'">
                <mat-panel-title class="maintenance-header-title">
                    <mat-icon [style.color]="devMaintenance.enabled ? '#f44336' : '#4caf50'">
                        {{ devMaintenance.enabled ? 'engineering' : 'check_circle' }}
                    </mat-icon>
                    <span>Dev / Localhost</span>
                </mat-panel-title>
                <mat-panel-description class="maintenance-header-description">
                    <span *ngIf="!devMaintenance.enabled" class="status-text online">Online</span>
                    <span *ngIf="devMaintenance.enabled" class="status-text offline">Offline</span>

                    <mat-slide-toggle [checked]="devMaintenance.enabled" (change)="onMaintenanceToggle($event, 'dev')"
                        (click)="$event.stopPropagation()" [disabled]="isUpdatingMaintenance" color="warn">
                    </mat-slide-toggle>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <div class="maintenance-content">
                <p class="maintenance-description">
                    Non-admin users on Localhost will be redirected.
                </p>

                <div class="maintenance-form-container">
                    <mat-form-field appearance="outline" class="maintenance-message-field">
                        <mat-label>Message (Dev)</mat-label>
                        <textarea matInput [(ngModel)]="devMaintenance.message" rows="2"
                            placeholder="Message shown to users" [disabled]="isUpdatingMaintenance"></textarea>
                    </mat-form-field>

                    <div class="maintenance-actions">
                        <button mat-raised-button color="primary" (click)="saveMaintenanceMessage('dev')"
                            [disabled]="isUpdatingMaintenance || !hasMessageChanged('dev')" class="save-btn">
                            <mat-icon>save</mat-icon>
                            Save
                        </button>
                        <mat-spinner *ngIf="isUpdatingMaintenance" diameter="24"
                            style="align-self: center;"></mat-spinner>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
    </div>
</div>