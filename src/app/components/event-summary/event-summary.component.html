<div class="glass-card event-summary-card">
  <!-- Primary Info Section -->
  <div class="summary-primary-info">
    <div class="summary-avatar-container">
      <div class="summary-avatar">
        <app-privacy-icon [privacy]="event.privacy" (click)="toggleEventPrivacy()"></app-privacy-icon>
      </div>
      <div class="summary-date-info">
        <span class="date-display">
          <b>{{ event.startDate | date:"d MMM yyyy" }}</b>
          <span class="time-separator">at</span>
          {{ event.startDate | date:"shortTime" }}
        </span>
      </div>
    </div>

    <div class="summary-actions">
      @if (isOwner) {
      <button mat-icon-button (click)="openEditDetails()" matTooltip="Edit details">
        <mat-icon>edit</mat-icon>
      </button>
      }
      @if (isOwner) {
      <app-event-actions [user]="user" [event]="event" [showDownloadOriginal]="true" align="end"></app-event-actions>
      }
    </div>
  </div>

  <!-- Activities Toggles Section -->
  @if (event.getActivities().length > 1) {
  <div class="summary-activities-toggles">
    <app-activities-toggles [event]="event" [user]="user" [isOwner]="isOwner">
    </app-activities-toggles>
  </div>
  }

  <!-- Stats Grid Section -->
  <div class="summary-stats-area">
    <div class="stats-container">
      <app-event-card-stats-grid [event]="event" [selectedActivities]="selectedActivities"
        [unitSettings]="unitSettings">
      </app-event-card-stats-grid>
    </div>

    <div class="analysis-trigger">
      <button mat-stroked-button color="primary" (click)="openDetailedStats()">
        <mat-icon>open_in_full</mat-icon>
        <span>Open Analysis</span>
      </button>
    </div>
  </div>

  <!-- Projected Content (Tabs, etc.) -->
  <div class="summary-projected-tabs">
    <ng-content select="[summary-bottom]"></ng-content>
  </div>
</div>